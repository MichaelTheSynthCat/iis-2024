<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="content-type" content="text/html" charset="UTF-8" />
    <title>Projekt IIS</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <style type="text/css">
        table {
            border-collapse: collapse;
        }

        td,
        th {
            border: 1px solid black;
            padding: 0.3em 0.5em;
            text-align: left;
        }

        dt {
            font-weight: bold;
            margin-top: 0.5em;
        }
    </style>
</head>

<body style="margin: 2rem;">

    <!-- Zkontrolujte prosím nastavení kódování v hlavičce dokumentu
     podle použitého editoru -->

    <h1>Zvířecí útulek</h1> <!-- Nahradte názvem svého zadání -->

    <dl>
        <dt>Autoři</dt>
        <dd>Michal Krulich (vedúci) <!-- Nahraďte skutečným jménem a e-mailem autora a popisem činnosti -->
            <a href="mailto:xkruli03@stud.fit.vutbr.cz">xkruli03@stud.fit.vutbr.cz</a>
            <ul>
                <li>správa používateľov administrátorom alebo pečovateľom,</li>
                <li>prihlasovanie a registrácia, správa používateľského profilu</li>
                <li>nasadenie produkčnej verzie IS,</li>
                <li>dokumentácia.</li>
            </ul>
        </dd>
        <dd>Stanislav Letaši <!-- Nahraďte skutečným jménem a e-mailem autora a popisem činnosti -->
            <a href="mailto:xletas00@stud.fit.vutbr.cz">xletas00@stud.fit.vutbr.cz</a>
            <ul>
                <li>nárvh dátového modelu IS,</li>
                <li>prehliadanie a správa zvierat,</li>
                <li>domovská stránka</li>
                <li>grafický dizajn stránky.</li>
            </ul>
        </dd>
        <dd>Boris Hatala <!-- Nahraďte skutečným jménem a e-mailem autora a popisem činnosti -->
            <a href="mailto:xhatal02@stud.fit.vutbr.cz">xhatal02@stud.fit.vutbr.cz</a>
            <ul>
                <li>prehliadanie rozvrhov venčení a možnosť ich rezervácie</li>
                <li>vybavovanie a správa rezervácii venčení,</li>
                <li>prehliadanie a pridávanie požiadavok na vyšetrenie zvieraťa,</li>
                <li>zaznamenávanie vykonaných veterinárnych vyšetrení.</li>
            </ul>
        </dd>
        <dt>URL aplikace</dt>
        <dd><a href="https://iis-2024.onrender.com/">https://iis-2024.onrender.com/</a> <span class="text-danger">(Pri
                dlhšej neaktivite je server uspaný. Zobudenie serveru po prvom HTTP požiadavku trvá cca 1
                minútu.)</span></dd>
    </dl>

    <h2>Uživatelé systému pro testování</h2>
    <p>Všetci používatelia majú v produkčnej verzii prednastavené heslo na <code>xkruli03</code>. (vo vývojárskom
        prostredí je nastavené heslo <code>password</code>)</p>
    <table>
        <tr>
            <th>Login</th>
            <th>Heslo</th>
            <th>Role</th>
        </tr>
        <tr>
            <td>admin</td>
            <td>xkruli03</td>
            <td>Administrátor (<code>Administrator</code>)</td>
        </tr>
        <tr>
            <td>tampol</td>
            <td>xkruli03</td>
            <td>Pečovatel (<code>Caregiver</code>)</td>
        </tr>
        <tr>
            <td>harvey</td>
            <td>xkruli03</td>
            <td>Pečovatel (<code>Caregiver</code>)</td>
        </tr>
        <tr>
            <td>blakeRae</td>
            <td>xkruli03</td>
            <td>Veterinář (<code>Veterinarian</code>)</td>
        </tr>
        <tr>
            <td>tiger_king</td>
            <td>xkruli03</td>
            <td>Veterinář (<code>Veterinarian</code>)</td>
        </tr>
        <tr>
            <td>willow_jones</td>
            <td>xkruli03</td>
            <td>Dobrovolník (<code>Volunteer</code>)</td>
        </tr>
        <tr>
            <td>althea_hays</td>
            <td>xkruli03</td>
            <td>Dobrovolník (<code>Volunteer</code>)</td>
        </tr>
        <tr>
            <td>ezekiel_leach</td>
            <td>xkruli03</td>
            <td>Neoverený používateľ (<code>Unverified</code>)</td>
        </tr>
        <tr>
            <td>james_sharpe</td>
            <td>xkruli03</td>
            <td>Neoverený používateľ (<code>Unverified</code>)</td>
        </tr>
    </table>

    <h3>Video</h3>

    <p><a href="https://drive.google.com/file/d/1pmFva82uWuqCTuCsxLtc91ouqtudnBS6/view?usp=sharing">odkaz na video</a></p>

    <h2>Implementace</h2>
        <p>
            Na implementáciu informačného systému bol použitý Python framework Django. Dáta sa ukladajú v databáze PostgreSQL. Hlavné funkcionality sú rozdelené do modulov podľa oblastí použitia:
            <strong>users</strong>, <strong>animals</strong>, <strong>walks</strong> a <strong>health-records</strong>.
        </p>
        <h3>Návrhový vzor</h3>
        <p>
            Projekt je postavený na architektúre MVT (Model-View-Template), kde:
        </p>
        <ul>
            <li><strong>Models</strong> reprezentujú dáta a sú definované pomocou tried v <code>models.py</code>.</li>
            <li><strong>Views</strong> obsluhujú požiadavky používateľov a zabezpečujú logiku prezentácie dát. Sú implementované ako funkcie alebo triedy vo <code>views.py</code>.</li>
            <li><strong>Templates</strong> poskytujú HTML výstupy a nachádzajú sa v priečinku <code>templates/</code>.</li>
        </ul>

        <h3>Implementácia prípadov použitia</h3>

        <h4>1. Administrátor</h4>
        <ul>
            <li><strong>Správa používateľov:</strong>
                <ul>
                    <li><strong>Modul:</strong> <code>users</code></li>
                    <li><strong>Súbory:</strong> <code>views.py, actions.py, list.py</code></li>
                    <li><strong>Hlavné funkcie:</strong>
                        <ul>
                            <li><code>users_list</code> – zobrazenie zoznamu používateľov s možnosťou filtrovania.</li>
                            <li><code>user_edit</code> – úprava údajov používateľa.</li>
                            <li><code>user_create</code> – pridanie nového používateľa.</li>
                            <li><code>delete</code> – odstránenie používateľa.</li>
                            <li><code>reset_password</code> – obnova hesla používateľa.</li>
                        </ul>
                    </li>
                    <li><strong>Šablóny:</strong> <code>templates/users/*</code></li>
                </ul>
            </li>
        </ul>

        <h4>2. Opatrovateľ</h4>
        <ul>
            <li><strong>Správa zvierat:</strong>
                <ul>
                    <li><strong>Moduly:</strong> <code>animals, health-records, walks</code></li>
                    <li><strong>Súbory:</strong> <code>views.py</code></li>
                    <li><strong>Hlavné funkcie:</strong>
                        <ul>
                            <li><code>animals_list</code> – zobrazenie zoznamu zvierat.</li>
                            <li><code>animal_create</code> – pridanie nového zvieraťa.</li>
                            <li><code>animal_edit</code> – úprava údajov o zvierati.</li>
                            <li><code>animal_delete</code> – odstránenie zvieraťa.</li>
                            <li><code>health_records_create</code> – vytvorenie nového zdravotného záznamu pre zviera.</li>
                            <li><code>health_records_caregiver_edit</code> – úprava zdravotného záznamu zo strany opatrovateľa - detaily o predchádzajúcich zdravotných požiadavkách zvieraťa.</li>
                            <li><code>walk_create</code> – vytvorenie nového termínu venčenia.</li>
                            <li><code>walk_edit</code> – úprava údajov venčenia.</li>
                        </ul>
                    </li>
                    <li><strong>Šablóny:</strong> <code>templates/animals/*, templates/health-records/*, templates/walks/*</code></li>
                </ul>
            </li>
        </ul>

        <h4>3. Veterinár</h4>
        <ul>
            <li><strong>Plánovanie vyšetrení:</strong>
                <ul>
                    <li><strong>Modul:</strong> <code>health-records</code></li>
                    <li><strong>Súbor:</strong> <code>views.py</code></li>
                    <li><strong>Hlavné funkcie:</strong> <ul>
                        <li><code>health_records_vet_edit</code> – úprava zdravotného záznamu zo strany veterinára - stav a výsledok vyšetrenia.</li>
                        <li><code>health_records_delete</code> – odstránenie zdravotného záznamu.</li>
                        <li><code>choose_health_record</code> – výber požiadavky na vyšetrenie ktorá nemá priradeného veterinára </li> </ul>
                    </li>
                    <li><strong>Šablóny:</strong> <code>templates/health-records/*</code></li> </ul> </li> </ul>

        <h4>4. Dobrovoľník</h4>
        <ul>
            <li><strong>Rezervácia venčenia:</strong>
                <ul>
                    <li><strong>Modul:</strong> <code>walks</code></li>
                    <li><strong>Súbor:</strong> <code>views.py</code></li>
                    <li><strong>Hlavné funkcie:</strong>
                        <ul>
                            <li><code>walks_list</code> – zobrazenie zoznamu venčení.</li>
                            <li><code>choose_walk</code> – výber dostupného venčenia.</li>
                            <li><code>walk_history</code> – zobrazenie histórie venčení dobrovoľníka.</li>
                        </ul>
                    </li>
                    <li><strong>Šablóny:</strong> <code>templates/walks/*</code></li>
                </ul>
            </li>
        </ul>

        <h4>5. Neregistrovaný používateľ</h4>
        <ul>
            <li><strong>Prehliadanie zvierat:</strong>
                <ul>
                    <li><strong>Modul:</strong> <code>animals</code></li>
                    <li><strong>Súbor:</strong> <code>views.py</code></li>
                    <li><strong>Hlavné funkcie:</strong>
                        <ul>
                            <li><code>animals_list</code> – zobrazenie verejného zoznamu zvierat.</li>
                            <li><code>animal_detail</code> – zobrazenie detailov o konkrétnom zvierati.</li>
                        </ul>
                    </li>
                    <li><strong>Šablóny:</strong> <code>templates/animals/*</code></li>
                </ul>
            </li>
        </ul>

        <h3>Ďalšie detaily implementácie</h3>
        <ul>
            <li><strong>Databázové modely:</strong> Entity sú definované v príslušných <code>models.py</code> súboroch.</li>
            <li><strong>Šablóny a štýly:</strong> Šablóny sú uložené v <code>templates/</code> a štýly v <code>static/css/styles.css</code>.</li>
            <li><strong>Skript <code>predeploy.sh</code>:</strong> Automatizuje migrácie, generovanie statických súborov a seeding dát.</li>
        </ul>


    <h3>Databáze</h3>

    <img src="ER_shelter.png" style="width:60%; ">

    <h2>Instalace</h2>

    Tento návod popisuje spôsob inštalácie informačného systému Zvieracieho útulku pre bežné Unix-ové operačné systémy.
    <br>
    Softwarové požiadavky:
    <ul>
        <li>Python v3.10+</li>
        <li>Gunicorn</li>
        <li>webový server Nginx alebo Apache</li>
    </ul>
    Postup inštalácie:
    <ol>
        <li>Zkopírovať obsah koreňovej zložky <code>animal_shelter</code> na server.</li>
        <li>Nainštalovať potrebné Python balíčky uvedené v <code>requirements.txt</code><br>
            <code>pip install -r requirements.txt</code>
        </li>
        <li>Nastaviť nasledujúce premenné prostredia:<br>
            <ul>
                <li><code>SECRET_KEY</code> - dostatočne silný vygenerovaný <a
                        href="https://docs.djangoproject.com/en/5.1/ref/settings/#secret-key">kľúč</a> slúžiaci pre
                    rôzne bezpečnostné kryptografické funkcie Djanga</li>
                <li><code>ALLOWED_HOSTS</code> - top level doména, na ktorej je IS dostupný
                    <br>napr. <code>ALLOWED_HOSTS="iis-2024.onrender.com"</code>
                </li>
                <li><code>DATABASE_URL</code> - <a href="https://pypi.org/project/dj-database-url/">reťazec</a>
                    špecifikujúci spôsob pripojenia na databázový server
                    <br>napr.
                    <code>DATABASE_URL="postgresql://user:password@databases.render.com/shelter_db_name"</code>
                </li>
        </li><code>DEBUG=False</code></li>
        </ul>
        </li>
        <li>Spustiť skript <code>predeploy.sh</code>, ktorý <br>
            <ul>
                <li>vykoná migrácie databázy,</li>
                <li>naplní databázu ukžkovými dátami,</li>
                <li>nachystá všetky statické súbory do zložky <code>staticfiles</code>.</li>
            </ul>
            <code>./predeploy.sh</code>
        </li>
        <li>Pokiaľ je to potrebné, prideliť priečinku <code>staticfiles</code> práva pre čítanie komukoľvek.
        </li>
        <li>Spustiť server pomocou <code>gunicorn</code> využívajúci WSGI (Web Server Gateway Interface).
            <br>
            <code>gunicorn animal_shelter.wsgi</code>
        </li>
    </ol>

</body>

</html>
